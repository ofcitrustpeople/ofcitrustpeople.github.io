"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[2046],{2046:function(e,a,t){t.r(a),t.d(a,{default:function(){return G}});var l=t(3396),o=t(7139),s=t(9242);const r=e=>((0,l.dD)("data-v-f0255686"),e=e(),(0,l.Cn)(),e),n={class:"list"},i={key:0},d=(0,l.uE)('<div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div><div class="form-group" data-v-f0255686><label class="form-control skeleton-text skeleton-animate" data-v-f0255686></label><input type="text" class="form-control skeleton skeleton-animate" data-v-f0255686></div>',9),c=[d],m={key:1,class:"col-md-12"},u={class:"form-group d-inline-flex align-items-center mb-2 col-8"},f=r((()=>(0,l._)("label",{for:"listener_id"},"Слушатель",-1))),p=["value"],_={class:"form-group d-inline-flex align-items-center mb-2 col-6"},v=r((()=>(0,l._)("label",{for:"payer_id"},"Законный представитель",-1))),g=["value"],k={class:"form-group d-inline-flex align-items-center mb-2 col-5"},y=r((()=>(0,l._)("label",{for:"contr_number"},"Номер договора",-1))),b={class:"form-group d-inline-flex align-items-center mb-2 col-5"},h=r((()=>(0,l._)("label",{for:"program_id"},"Программы",-1))),V=["value"],w={class:"form-group d-inline-flex align-items-center mb-2 col-5"},x=r((()=>(0,l._)("label",{for:"cert_date"},"Дата выдачи сертификата",-1))),W={class:"form-group d-inline-flex align-items-center mb-2 col-5"},D=r((()=>(0,l._)("label",{for:"listened_hours"},"Прослушанные часы",-1))),C={class:"form-group d-inline-flex align-items-center mb-2 col-5"},L=r((()=>(0,l._)("label",{for:"date_enroll"},"Дата зачисления",-1))),A={class:"form-group d-inline-flex align-items-center mb-2 col-5"},U=r((()=>(0,l._)("label",{for:"date_kick"},"Дата отчисления",-1))),P={class:"form-group d-inline-flex align-items-center mb-2 col-6"},Z=r((()=>(0,l._)("label",{for:"group_to_move"},"Группа для перевода:",-1))),q=["value"],z={class:"form-group mt-3"},E=["disabled"],F={class:"spinner-border spinner-border-sm"};function I(e,a,t,r,d,I){const H=(0,l.up)("Select2"),K=(0,l.up)("Field"),N=(0,l.up)("ErrorMessage"),T=(0,l.up)("router-link"),Y=(0,l.up)("Form");return(0,l.wg)(),(0,l.iD)("div",n,[d.dataLoading?((0,l.wg)(),(0,l.iD)("div",i,c)):((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(Y,{onSubmit:I.addContract,"validation-schema":d.schema},{default:(0,l.w5)((({errors:t})=>[(0,l._)("div",null,[(0,l._)("div",u,[f,(0,l.Wm)(H,{class:(0,o.C_)(["col-5",{"form-control is-invalid":t.listener_id}]),modelValue:e.myValue,"onUpdate:modelValue":a[0]||(a[0]=a=>e.myValue=a),options:d.listeners,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.Wm)(K,{name:"listener_id",as:"select",modelValue:e.myValue,"onUpdate:modelValue":a[1]||(a[1]=a=>e.myValue=a),hidden:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.listeners,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,o.zw)(e.text),9,p)))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(N,{name:"listener_id",class:"error-feedback"})]),(0,l._)("div",_,[v,(0,l.Wm)(H,{class:(0,o.C_)(["col-5",{"form-control is-invalid":t.payer_id}]),modelValue:e.myValue2,"onUpdate:modelValue":a[2]||(a[2]=a=>e.myValue2=a),options:d.payers,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.Wm)(K,{name:"payer_id",as:"select",modelValue:e.myValue2,"onUpdate:modelValue":a[3]||(a[3]=a=>e.myValue2=a),hidden:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.payers,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,o.zw)(e.text),9,g)))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(N,{name:"payer_id",class:"error-feedback"})]),(0,l._)("div",k,[y,(0,l.Wm)(K,{name:"contr_number",type:"text",value:"",class:(0,o.C_)(["form-control",{"is-invalid":t.contr_number}])},null,8,["class"]),(0,l.Wm)(N,{name:"contr_number",class:"error-feedback"})]),(0,l._)("div",b,[h,(0,l.Wm)(H,{class:(0,o.C_)(["col-5",{"form-control is-invalid":t.program_id}]),modelValue:e.myValue3,"onUpdate:modelValue":a[4]||(a[4]=a=>e.myValue3=a),options:d.programs,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.Wm)(K,{name:"program_id",as:"select",modelValue:e.myValue3,"onUpdate:modelValue":a[5]||(a[5]=a=>e.myValue3=a),hidden:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.programs,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,o.zw)(e.text),9,V)))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(N,{name:"program_id",class:"error-feedback"})]),(0,l._)("div",w,[x,(0,l.Wm)(K,{name:"cert_date",type:"date",value:"NULL",class:(0,o.C_)(["form-control",{"is-invalid":t.cert_date}])},null,8,["class"]),(0,l.Wm)(N,{name:"cert_date",class:"error-feedback"})]),(0,l._)("div",W,[D,(0,l.Wm)(K,{name:"listened_hours",type:"number",value:"NULL",class:(0,o.C_)(["form-control",{"is-invalid":t.listened_hours}])},null,8,["class"]),(0,l.Wm)(N,{name:"listened_hours",class:"error-feedback"})]),(0,l._)("div",C,[L,(0,l.Wm)(K,{name:"date_enroll",type:"date",value:"",class:(0,o.C_)(["form-control",{"is-invalid":t.date_enroll}])},null,8,["class"]),(0,l.Wm)(N,{name:"date_enroll",class:"error-feedback"})]),(0,l._)("div",A,[U,(0,l.Wm)(K,{name:"date_kick",type:"date",class:(0,o.C_)(["form-control",{"is-invalid":t.dadate_kickte_enroll}])},null,8,["class"]),(0,l.Wm)(N,{name:"date_kick",class:"error-feedback"})]),(0,l._)("div",P,[Z,(0,l.Wm)(H,{class:(0,o.C_)(["col-5",{"form-control is-invalid":t.group_to_move}]),modelValue:e.myValueq,"onUpdate:modelValue":a[6]||(a[6]=a=>e.myValueq=a),options:d.groups,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.Wm)(K,{name:"group_to_move",as:"select",modelValue:e.myValueq,"onUpdate:modelValue":a[7]||(a[7]=a=>e.myValueq=a),hidden:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.groups,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,o.zw)(e.text),9,q)))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(N,{name:"group_to_move",class:"error-feedback"})])]),(0,l._)("div",z,[(0,l._)("button",{class:"btn btn-primary btn-block",disabled:d.loading},[(0,l.wy)((0,l._)("span",F,null,512),[[s.F8,d.loading]]),(0,l.Uk)(" Добавить договор ")],8,E),(0,l.Wm)(T,{to:"/contracts",class:"btn btn-secondary ml-2 float-end"},{default:(0,l.w5)((()=>[(0,l.Uk)("Отмена")])),_:1})])])),_:1},8,["onSubmit","validation-schema"]),d.message?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,o.C_)(["alert",d.successful?"alert-success":"alert-danger"])},(0,o.zw)(d.message),3)):(0,l.kq)("",!0)]))])}var H=t(5708),K=t(7629),N=t(5124),T=t(4677),Y={setup(){const e=(0,T.pm)();return{toast:e}},name:"AddContract",components:{Form:H.l0,Field:H.gN,ErrorMessage:H.Bc},data(){const e=K.Ry().shape({});return{successful:!1,loading:!1,dataLoading:!0,message:"",schema:e,listeners:null,payers:null,programs:null,groups:null}},computed:{},mounted(){},methods:{async addContract(e){try{this.loading=!0;const a=await N.Z.addContract(e.listener_id,e.payer_id,e.contr_number,e.program_id,e.cert_date,e.listened_hours,e.date_enroll,e.date_kick,e.group_to_move);a.data,this.loading=!1,this.successful=!0,this.toast.success("Успешно добавили договор!")}catch(a){this.message="Ошибка",this.toast.error("Ошибка добавления договор"),console.error("Error updating contract details:",a)}},async loadListenersData(){try{const e=await N.Z.getListenersAsIdText();this.listeners=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных:",e)}},async loadPayersData(){try{const e=await N.Z.getPayersAsIdText();this.payers=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных:",e)}},async loadGroupsData(){try{const e=await N.Z.getLgroupsAsIdText();this.groups=Array.isArray(e.data)?e.data:[e.data],this.groups.unshift({id:"NULL",text:"Нет"}),console.log(this.groups),this.dataLoading=!1}catch(e){console.error("Error loading data:",e)}},async loadProgramsData(){try{const e=await N.Z.getProgramsAsIdText();this.programs=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Ошибка загрузки данных:",e)}}},created(){this.loadListenersData(),this.loadPayersData(),this.loadProgramsData(),this.loadGroupsData()}},S=t(89);const j=(0,S.Z)(Y,[["render",I],["__scopeId","data-v-f0255686"]]);var G=j}}]);
//# sourceMappingURL=2046.fc782662.js.map