"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[9208],{9208:function(t,e,a){a.r(e),a.d(e,{default:function(){return z}});var o=a(3396),l=a(7139),s=a(9242);const r=t=>((0,o.dD)("data-v-61b74f80"),t=t(),(0,o.Cn)(),t),n={class:"col-md-12 list"},d={key:0},i={class:"form-group"},c=r((()=>(0,o._)("label",{for:"listener_id"},"Слушатель",-1))),m=["value"],u={class:"form-group"},p=r((()=>(0,o._)("label",{for:"payer_id"},"Законный представитель",-1))),f=["value"],b={class:"form-group"},v=r((()=>(0,o._)("label",{for:"contr_number"},"Номер договра",-1))),_={class:"form-group"},k=r((()=>(0,o._)("label",{for:"program_id"},"Программа",-1))),g=["value"],y={class:"form-group mt-3"},h=["disabled"],C={class:"spinner-border spinner-border-sm"},w={key:1},x=(0,o.uE)('<div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div><div class="form-group" data-v-61b74f80><label class="form-control skeleton-text skeleton-animate" data-v-61b74f80></label><input type="text" class="form-control skeleton skeleton-animate" data-v-61b74f80></div>',11),V=[x];function D(t,e,a,r,x,D){const W=(0,o.up)("Select2"),A=(0,o.up)("Field"),U=(0,o.up)("ErrorMessage"),I=(0,o.up)("router-link"),P=(0,o.up)("Form");return(0,o.wg)(),(0,o.iD)("div",n,[x.contract?((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(P,{onSubmit:D.updateContract,"validation-schema":x.schema},{default:(0,o.w5)((({errors:t})=>[(0,o._)("div",null,[(0,o._)("div",i,[c,(0,o.Wm)(W,{class:(0,l.C_)({"form-control is-invalid":t.listener_id}),modelValue:x.editedContract.listener_id,"onUpdate:modelValue":e[0]||(e[0]=t=>x.editedContract.listener_id=t),options:x.listeners,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,o.Wm)(A,{name:"listener_id",as:"select",modelValue:x.editedContract.listener_id,"onUpdate:modelValue":e[1]||(e[1]=t=>x.editedContract.listener_id=t),hidden:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(x.listeners,(t=>((0,o.wg)(),(0,o.iD)("option",{key:t.id,value:t.id},(0,l.zw)(t.text),9,m)))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(U,{name:"listener_id",class:"error-feedback"})]),(0,o._)("div",u,[p,(0,o.Wm)(W,{class:(0,l.C_)({"form-control is-invalid":t.payer_id}),modelValue:x.editedContract.payer_id,"onUpdate:modelValue":e[2]||(e[2]=t=>x.editedContract.payer_id=t),options:x.payers,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,o.Wm)(A,{name:"payer_id",as:"select",modelValue:x.editedContract.payer_id,"onUpdate:modelValue":e[3]||(e[3]=t=>x.editedContract.payer_id=t),hidden:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(x.payers,(t=>((0,o.wg)(),(0,o.iD)("option",{key:t.id,value:t.id},(0,l.zw)(t.text),9,f)))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(U,{name:"payer_id",class:"error-feedback"})]),(0,o._)("div",b,[v,(0,o.Wm)(A,{name:"contr_number",type:"text",value:"",class:(0,l.C_)(["form-control",{"is-invalid":t.contr_number}]),modelValue:x.editedContract.contr_number,"onUpdate:modelValue":e[4]||(e[4]=t=>x.editedContract.contr_number=t)},null,8,["class","modelValue"]),(0,o.Wm)(U,{name:"contr_number",class:"error-feedback"})]),(0,o._)("div",_,[k,(0,o.Wm)(W,{class:(0,l.C_)({"form-control is-invalid":t.program_id}),modelValue:x.editedContract.program_id,"onUpdate:modelValue":e[5]||(e[5]=t=>x.editedContract.program_id=t),options:x.programs,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,o.Wm)(A,{name:"program_id",as:"select",modelValue:x.editedContract.program_id,"onUpdate:modelValue":e[6]||(e[6]=t=>x.editedContract.program_id=t),hidden:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(x.programs,(t=>((0,o.wg)(),(0,o.iD)("option",{key:t.id,value:t.id},(0,l.zw)(t.text),9,g)))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(U,{name:"program_id",class:"error-feedback"})]),(0,o._)("div",y,[(0,o._)("button",{class:"btn btn-primary btn-block float-start",disabled:x.loading},[(0,o.wy)((0,o._)("span",C,null,512),[[s.F8,x.loading]]),(0,o.Uk)(" Обновить контракт ")],8,h),(0,o.Wm)(I,{to:"/contracts",class:"btn btn-secondary ml-2 float-end"},{default:(0,o.w5)((()=>[(0,o.Uk)("Отмена")])),_:1})])])])),_:1},8,["onSubmit","validation-schema"])])):((0,o.wg)(),(0,o.iD)("div",w,V)),t.message?((0,o.wg)(),(0,o.iD)("div",{key:2,class:(0,l.C_)(["alert",t.successful?"alert-success":"alert-danger"])},(0,l.zw)(t.message),3)):(0,o.kq)("",!0)])}var W=a(5708),A=a(7629),U=a(5124),I=a(4677),P={setup(){const t=(0,I.pm)();return{toast:t}},components:{Form:W.l0,Field:W.gN,ErrorMessage:W.Bc},data(){const t=A.Ry().shape({});return{schema:t,loading:!1,contract:null,editedContract:null,listeners:null,payers:null,programs:null}},methods:{async loadContractDetail(){const t=this.$route.params.contractId;try{const e=await U.Z.getContractById(t);this.contract=e.data,this.editedContract={...e.data}}catch(e){console.error("Error loading contract details:",e)}},async updateContract(){try{this.loading=!0;const t=await U.Z.updateContractById(this.contract.id,this.editedContract.listener_id,this.editedContract.payer_id,this.editedContract.contr_number,this.editedContract.program_id);t.data,this.contract={...this.editedContract},this.loading=!1,this.toast.success("Успешно обновили!")}catch(t){console.error("Ошибка загрузки данных:",t)}},async loadListenersData(){try{const t=await U.Z.getListenersAsIdText();this.listeners=Array.isArray(t.data)?t.data:[t.data]}catch(t){console.error("Ошибка загрузки данных:",t)}},async loadPayersData(){try{const t=await U.Z.getPayersAsIdText();this.payers=Array.isArray(t.data)?t.data:[t.data]}catch(t){console.error("Ошибка загрузки данных:",t)}},async loadProgramsData(){try{const t=await U.Z.getProgramsAsIdText();this.programs=Array.isArray(t.data)?t.data:[t.data]}catch(t){console.error("Ошибка загрузки данных:",t)}}},created(){this.loadContractDetail(),this.loadListenersData(),this.loadPayersData(),this.loadProgramsData()}},Z=a(89);const F=(0,Z.Z)(P,[["render",D],["__scopeId","data-v-61b74f80"]]);var z=F}}]);
//# sourceMappingURL=9208.7501e696.js.map