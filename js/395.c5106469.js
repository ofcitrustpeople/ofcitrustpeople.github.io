"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[395],{395:function(e,a,t){t.r(a),t.d(a,{default:function(){return z}});var l=t(3396),o=t(7139),n=t(9242);const s=e=>((0,l.dD)("data-v-1c09495a"),e=e(),(0,l.Cn)(),e),d={class:"col-md-12 list"},i={key:0},c={class:"form-group d-inline-flex align-items-center col-5 mb-2"},r=s((()=>(0,l._)("label",{for:"contract_id"},"Номер договора",-1))),m=["value"],u={class:"form-group d-inline-flex align-items-center mb-2"},p=s((()=>(0,l._)("label",{for:"expiration_date"},"Дата просрочки:",-1))),v={class:"form-group d-inline-flex align-items-center mb-2"},f=s((()=>(0,l._)("label",{for:"date_40"},"Дата оплаты 40%:",-1))),_={class:"form-group d-inline-flex align-items-center mb-2 col-6"},y=s((()=>(0,l._)("label",{for:"all_sum"},"Вся сумма:",-1))),k={class:"form-group d-inline-flex align-items-center mb-2 col-5"},b=s((()=>(0,l._)("label",{for:"deposited_amount"},"Внесённая сумма:",-1))),g={class:"form-group d-inline-flex align-items-center mb-2 col-5"},x=s((()=>(0,l._)("label",{for:"left_to_pay"},"Остаточная сумма:",-1))),h={class:"form-group d-inline-flex align-items-center mb-2 col-6"},P=s((()=>(0,l._)("label",{for:"bank"},"Банк:",-1))),V={class:"form-group mt-3"},w=["disabled"],W={class:"spinner-border spinner-border-sm"},C={key:1},D=(0,l.uE)('<div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div><div class="form-group" data-v-1c09495a><label class="form-control skeleton-text skeleton-animate" data-v-1c09495a></label><input type="text" class="form-control skeleton skeleton-animate" data-v-1c09495a></div>',13),U=[D];function F(e,a,t,s,D,F){const I=(0,l.up)("Select2"),E=(0,l.up)("Field"),Z=(0,l.up)("ErrorMessage"),A=(0,l.up)("router-link"),B=(0,l.up)("Form");return(0,l.wg)(),(0,l.iD)("div",d,[D.payment?((0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(B,{onSubmit:F.updatePayment,"validation-schema":D.schema},{default:(0,l.w5)((({errors:t})=>[(0,l._)("div",null,[(0,l._)("div",c,[r,(0,l.Wm)(I,{class:(0,o.C_)(["col-5",{"form-control is-invalid":t.contract_id}]),modelValue:D.editedPayment.contract_id,"onUpdate:modelValue":a[0]||(a[0]=e=>D.editedPayment.contract_id=e),options:D.contracts,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.Wm)(E,{name:"contract_id",as:"select",modelValue:e.contract_id,"onUpdate:modelValue":a[1]||(a[1]=a=>e.contract_id=a),hidden:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(D.contracts,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,o.zw)(e.text),9,m)))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(Z,{name:"contract_id",class:"error-feedback"})]),(0,l._)("div",u,[p,(0,l.Wm)(E,{name:"expiration_date",type:"date",class:(0,o.C_)(["form-control",{"is-invalid":t.expiration_date}]),value:"",modelValue:D.editedPayment.expiration_date,"onUpdate:modelValue":a[2]||(a[2]=e=>D.editedPayment.expiration_date=e)},null,8,["class","modelValue"]),(0,l.Wm)(Z,{name:"expiration_date",class:"error-feedback"})]),(0,l._)("div",v,[f,(0,l.Wm)(E,{name:"date_40",type:"date",class:(0,o.C_)(["form-control",{"is-invalid":t.date_40}]),value:"",modelValue:D.editedPayment.date_40,"onUpdate:modelValue":a[3]||(a[3]=e=>D.editedPayment.date_40=e)},null,8,["class","modelValue"]),(0,l.Wm)(Z,{name:"date_40",class:"error-feedback"})]),(0,l._)("div",_,[y,(0,l.Wm)(E,{name:"all_sum",type:"text",class:(0,o.C_)(["form-control",{"is-invalid":t.all_sum}]),value:"",modelValue:D.editedPayment.all_sum,"onUpdate:modelValue":a[4]||(a[4]=e=>D.editedPayment.all_sum=e)},null,8,["class","modelValue"]),(0,l.Wm)(Z,{name:"all_sum",class:"error-feedback"})]),(0,l._)("div",k,[b,(0,l.Wm)(E,{name:"deposited_amount",type:"number",class:(0,o.C_)(["form-control",{"is-invalid":t.deposited_amount}]),value:"",modelValue:D.editedPayment.deposited_amount,"onUpdate:modelValue":a[5]||(a[5]=e=>D.editedPayment.deposited_amount=e)},null,8,["class","modelValue"]),(0,l.Wm)(Z,{name:"deposited_amount",class:"error-feedback"})]),(0,l._)("div",g,[x,(0,l.Wm)(E,{name:"left_to_pay",type:"number",class:(0,o.C_)(["form-control",{"is-invalid":t.left_to_pay}]),value:"",modelValue:D.editedPayment.left_to_pay,"onUpdate:modelValue":a[6]||(a[6]=e=>D.editedPayment.left_to_pay=e)},null,8,["class","modelValue"]),(0,l.Wm)(Z,{name:"left_to_pay",class:"error-feedback"})]),(0,l._)("div",h,[P,(0,l.Wm)(E,{name:"bank",type:"number",class:(0,o.C_)(["form-control",{"is-invalid":t.bank}]),value:"",modelValue:D.editedPayment.bank,"onUpdate:modelValue":a[7]||(a[7]=e=>D.editedPayment.bank=e)},null,8,["class","modelValue"]),(0,l.Wm)(Z,{name:"bank",class:"error-feedback"})]),(0,l._)("div",V,[(0,l._)("button",{class:"btn btn-primary btn-block float-start",disabled:D.loading},[(0,l.wy)((0,l._)("span",W,null,512),[[n.F8,D.loading]]),(0,l.Uk)(" Обновить платёж ")],8,w),(0,l.Wm)(A,{to:"/payments",class:"btn btn-secondary ml-2 float-end"},{default:(0,l.w5)((()=>[(0,l.Uk)("Отмена")])),_:1})])])])),_:1},8,["onSubmit","validation-schema"])])):((0,l.wg)(),(0,l.iD)("div",C,U)),e.message?((0,l.wg)(),(0,l.iD)("div",{key:2,class:(0,o.C_)(["alert",e.successful?"alert-success":"alert-danger"])},(0,o.zw)(e.message),3)):(0,l.kq)("",!0)])}var I=t(5708),E=t(7629),Z=t(5124),A=t(4677),B={setup(){const e=(0,A.pm)();return{toast:e}},components:{Form:I.l0,Field:I.gN,ErrorMessage:I.Bc},data(){const e=E.Ry().shape({});return{schema:e,loading:!1,payment:null,editedPayment:null,groups:null,contracts:null}},methods:{async loadPaymentDetail(){const e=this.$route.params.paymentID;try{const a=await Z.Z.getPaymentById(e);this.payment=a.data,this.editedPayment={...a.data}}catch(a){console.error("Error loading payer details:",a)}},async updatePayment(){try{this.loading=!0;const e=await Z.Z.updatePaymentById(this.payment.id,this.editedPayment.contract_id,this.editedPayment.expiration_date,this.editedPayment.date_40,this.editedPayment.all_sum,this.editedPayment.deposited_amount,this.editedPayment.left_to_pay,this.editedPayment.bank);e.data,this.payer={...this.editedPayer},this.loading=!1,this.toast.success("Успешно обновили плательщика!")}catch(e){console.error("Ошибка :",e)}},async loadContractsData(){try{const e=await Z.Z.getContractsAsIdText();this.contracts=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Ошибка загрузки данных:",e)}}},created(){this.loadPaymentDetail(),this.loadContractsData()}},S=t(89);const j=(0,S.Z)(B,[["render",F],["__scopeId","data-v-1c09495a"]]);var z=j}}]);
//# sourceMappingURL=395.c5106469.js.map