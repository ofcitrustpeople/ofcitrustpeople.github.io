"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[792],{3792:function(a,e,o){o.r(e),o.d(e,{default:function(){return F}});var t=o(3396),s=o(7139),l=o(9242);const r=a=>((0,t.dD)("data-v-89a47820"),a=a(),(0,t.Cn)(),a),i={class:"list"},d={key:0},n=(0,t.uE)('<div class="form-group" data-v-89a47820><label class="form-control skeleton-text skeleton-animate" data-v-89a47820></label><input type="text" class="form-control skeleton skeleton-animate" data-v-89a47820></div><div class="form-group" data-v-89a47820><label class="form-control skeleton-text skeleton-animate" data-v-89a47820></label><input type="text" class="form-control skeleton skeleton-animate" data-v-89a47820></div><div class="form-group" data-v-89a47820><label class="form-control skeleton-text skeleton-animate" data-v-89a47820></label><input type="text" class="form-control skeleton skeleton-animate" data-v-89a47820></div>',3),u=[n],c={key:1,class:"col-md-12"},m={class:"form-group"},p=r((()=>(0,t._)("label",{for:"group_dir_id"},"Направление",-1))),g=["value"],_={class:"form-group"},f=r((()=>(0,t._)("label",{for:"group_prof_id"},"Профиль",-1))),v=["value"],b={class:"form-group"},h=r((()=>(0,t._)("label",{for:"group_number"},"Номер группы",-1))),y={class:"form-group mt-3"},k=["disabled"],w={class:"spinner-border spinner-border-sm"};function V(a,e,o,r,n,V){const D=(0,t.up)("Select2"),x=(0,t.up)("Field"),W=(0,t.up)("ErrorMessage"),A=(0,t.up)("router-link"),C=(0,t.up)("Form");return(0,t.wg)(),(0,t.iD)("div",i,[n.dataLoading?((0,t.wg)(),(0,t.iD)("div",d,u)):((0,t.wg)(),(0,t.iD)("div",c,[(0,t.Wm)(C,{onSubmit:V.addGroup,"validation-schema":n.schema},{default:(0,t.w5)((({errors:o})=>[(0,t._)("div",null,[(0,t._)("div",m,[p,(0,t.Wm)(D,{class:(0,s.C_)({"form-control is-invalid":o.group_dir_id}),modelValue:n.myValue,"onUpdate:modelValue":e[0]||(e[0]=a=>n.myValue=a),options:n.directions,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,t.Wm)(x,{name:"group_dir_id",as:"select",modelValue:n.myValue,"onUpdate:modelValue":e[1]||(e[1]=a=>n.myValue=a),hidden:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.directions,(a=>((0,t.wg)(),(0,t.iD)("option",{key:a.id,value:a.id},(0,s.zw)(a.text),9,g)))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(W,{name:"group_dir_id",class:"error-feedback"})]),(0,t._)("div",_,[f,(0,t.Wm)(D,{class:(0,s.C_)({"form-control is-invalid":o.group_prof_id}),modelValue:a.myValue2,"onUpdate:modelValue":e[2]||(e[2]=e=>a.myValue2=e),options:n.profiles,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,t.Wm)(x,{name:"group_prof_id",as:"select",modelValue:a.myValue2,"onUpdate:modelValue":e[3]||(e[3]=e=>a.myValue2=e),hidden:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.profiles,(a=>((0,t.wg)(),(0,t.iD)("option",{key:a.id,value:a.id},(0,s.zw)(a.text),9,v)))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(W,{name:"group_prof_id",class:"error-feedback"})]),(0,t._)("div",b,[h,(0,t.Wm)(x,{name:"group_number",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":o.group_number}])},null,8,["class"]),(0,t.Wm)(W,{name:"group_number",class:"error-feedback"})]),(0,t._)("div",y,[(0,t._)("button",{class:"btn btn-primary btn-block",disabled:n.loading},[(0,t.wy)((0,t._)("span",w,null,512),[[l.F8,n.loading]]),(0,t.Uk)(" Добавить группу ")],8,k),(0,t.Wm)(A,{to:"/groups",class:"btn btn-secondary ml-2 float-end"},{default:(0,t.w5)((()=>[(0,t.Uk)("Отмена")])),_:1})])])])),_:1},8,["onSubmit","validation-schema"]),n.message?((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,s.C_)(["alert",n.successful?"alert-success":"alert-danger"])},(0,s.zw)(n.message),3)):(0,t.kq)("",!0)]))])}var D=o(5708),x=o(7629),W=o(5124),A=o(4677),C={setup(){const a=(0,A.pm)();return{toast:a}},name:"AddGroup",components:{Form:D.l0,Field:D.gN,ErrorMessage:D.Bc},data(){const a=x.Ry().shape({});return{successful:!1,loading:!1,dataLoading:!0,message:"",schema:a,groups:null,profiles:null,directions:null,myValue:""}},computed:{},mounted(){},methods:{async addGroup(a){try{this.loading=!0;const e=await W.Z.addGroup(a.group_dir_id,a.group_prof_id,a.group_number);e.data,this.loading=!1,this.successful=!0,this.toast.success("Успешно добавили группу!")}catch(e){this.message="Ошибка",this.toast.error("Ошибка добавления группу"),console.error("Error:",e)}},async loadDirectionsData(){try{const a=await W.Z.getDirectionsAsIdText();this.directions=Array.isArray(a.data)?a.data:[a.data],this.dataLoading=!1}catch(a){console.error("Error:",a)}},async loadProfilesData(){try{const a=await W.Z.getProfilesAsIdText();this.profiles=Array.isArray(a.data)?a.data:[a.data],this.dataLoading=!1}catch(a){console.error("Error:",a)}}},created(){this.loadDirectionsData(),this.loadProfilesData()}},E=o(89);const U=(0,E.Z)(C,[["render",V],["__scopeId","data-v-89a47820"]]);var F=U}}]);
//# sourceMappingURL=792.75e45008.js.map