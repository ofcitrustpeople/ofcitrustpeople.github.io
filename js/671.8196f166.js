"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[671],{671:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var s=a(3396),l=a(9242),n=a(7139);const r=e=>((0,s.dD)("data-v-a8e9e1f8"),e=e(),(0,s.Cn)(),e),i={class:"col col-xs-9 col-lg-12 mt-4 list"},c={class:"col col-12"},o={class:"mb-3 col col-12"},u=r((()=>(0,s._)("i",{class:"material-icons-outlined"},"add",-1))),h={class:"col col-3 float-end"},d={key:0,class:"table"},g=r((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),_=r((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),w=r((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),p=r((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),m=r((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),k=r((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),P=[g,_,w,p,m,k],y={key:1,class:"table"},b=r((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"ID студента"),(0,s._)("th",null,"ФИО"),(0,s._)("th",null,"Группа"),(0,s._)("th",null,"Приказ о зачислении"),(0,s._)("th",null,"Дата зачисления"),(0,s._)("th",null,"Дата рождения")])],-1))),v=["onClick"],C=r((()=>(0,s._)("i",{class:"material-icons-outlined"},"visibility",-1))),f={class:"float-start"},D={class:"pagination"},Q=r((()=>(0,s._)("i",{class:"material-icons-outlined"},"chevron_left",-1))),$=[Q],x=["onClick"],A=r((()=>(0,s._)("i",{class:"material-icons-outlined"},"chevron_right",-1))),S=[A],q={class:"float-end"};function z(e,t,a,r,g,_){return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",c,[(0,s._)("div",o,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>_.navigateToAddCw&&_.navigateToAddCw(...e)),class:"btn btn-primary float-start",type:"button"},[u,(0,s.Uk)("Добавить студента")]),(0,s._)("div",h,[(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>g.searchQuery=e),onInput:t[2]||(t[2]=(...e)=>_.updateSearchQuery&&_.updateSearchQuery(...e)),placeholder:"Поиск..."},null,544),[[l.nr,g.searchQuery]])])]),g.loading?((0,s.wg)(),(0,s.iD)("table",d,[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.cwsPerPage,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e},P)))),128))])])):((0,s.wg)(),(0,s.iD)("table",y,[b,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.paginatedCws,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.cw_id},[(0,s._)("td",null,(0,n.zw)(e.course_work_id),1),(0,s._)("td",null,(0,n.zw)(e.course_work_teacher_id),1),(0,s._)("td",null,(0,n.zw)(e.course_work_theme),1),(0,s._)("td",null,(0,n.zw)(e.full_name),1),(0,s._)("td",null,(0,n.zw)(e.course_work_kafedra),1),(0,s._)("td",null,[(0,s._)("button",{onClick:t=>_.viewCwDetail(e.cw_id),class:"btn btn-primary btn-sm"},[C,(0,s.Uk)("Детали")],8,v)])])))),128))])])),(0,s._)("nav",f,[(0,s._)("ul",D,[(0,s._)("li",{class:(0,n.C_)(["page-item",{disabled:1===g.currentPage}])},[(0,s._)("button",{onClick:t[3]||(t[3]=(...e)=>_.prevPage&&_.prevPage(...e)),class:"btn page-link btn-sm"},$)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.pageRange,(e=>((0,s.wg)(),(0,s.iD)("li",{class:(0,n.C_)(["page-item",{active:e==g.currentPage}]),key:e},[(0,s._)("button",{onClick:t=>_.changePage(e),class:"btn page-link nmbr btn-sm"},(0,n.zw)(e),9,x)],2)))),128)),(0,s._)("li",{class:(0,n.C_)(["page-item",{disabled:g.currentPage===_.totalPages}])},[(0,s._)("button",{onClick:t[4]||(t[4]=(...e)=>_.nextPage&&_.nextPage(...e)),class:"btn page-link btn-sm"},S)],2)])]),(0,s._)("div",q,[(0,s._)("button",{onClick:t[5]||(t[5]=e=>_.viewRightsDetail()),class:"btn btn-primary btn-sm"},"Права ролей")])])])}a(7658);var R=a(5124),I={data(){return{cws:[],currentPage:1,cwsPerPage:10,maxPageButtons:3,loading:!0,searchQuery:""}},computed:{totalPages(){const e=this.filterCws();return Math.ceil(e.length/this.cwsPerPage)},paginatedCws(){const e=(this.currentPage-1)*this.cwsPerPage,t=e+this.cwsPerPage,a=this.filterCws();return a.slice(e,t)},pageRange(){const e=this.totalPages,t=this.currentPage,a=this.maxPageButtons,s="...";if(e<=a)return Array.from({length:e},((e,t)=>t+1));const l=Math.floor(a/2);let n=Math.max(1,t-l),r=Math.min(e,n+a-1);r-n+1<a&&(n=r-a+1);const i=[];n>1&&i.push(1,s);for(let c=n;c<=r;c++)i.push(c);return r<e&&i.push(s,e),i}},methods:{filterCws(){const e=this.searchQuery.toLowerCase();return this.cws.filter((t=>String(t.full_name).toLowerCase().includes(e)||String(t.group_name).toLowerCase().includes(e)||String(t.formatted_date_of_birth).includes(e)||String(t.enrollment_order).includes(e)))},async loadCwsData(){try{const e=await R.Z.getAllCws();this.cws=Array.isArray(e.data)?e.data:[e.data],this.loading=!1}catch(e){console.error("Error loading cws data:",e)}},updateSearchQuery(){const e={page:1};""!==this.searchQuery.trim()&&(e.search=this.searchQuery),this.currentPage=1,this.$router.replace({query:e})},changePage(e){const t={...this.$route.query,page:e};""!==this.searchQuery.trim()&&(t.search=this.searchQuery),this.$router.replace({query:t})},prevPage(){this.currentPage>1&&this.changePage(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.changePage(this.currentPage+1)},viewCwDetail(e){this.$router.push(`/cws/${e}`)},viewRightsDetail(){this.$router.push("/Rights/cws")},navigateToAddCw(){this.$router.push("/addCw")}},beforeRouteUpdate(e,t,a){this.searchQuery=e.query.search||"",this.currentPage=parseInt(e.query.page)||1,a()},created(){const e=this.$route.query;this.currentPage=parseInt(e.page)||1,this.searchQuery=e.search||"",this.loadCwsData()}},M=a(89);const U=(0,M.Z)(I,[["render",z],["__scopeId","data-v-a8e9e1f8"]]);var H=U}}]);
//# sourceMappingURL=671.8196f166.js.map