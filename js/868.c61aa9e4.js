"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[868],{1868:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var o=t(3396),l=t(7139),s=t(9242);const r=e=>((0,o.dD)("data-v-20c6cc96"),e=e(),(0,o.Cn)(),e),i={class:"list"},n={key:0},d=(0,o.uE)('<div class="form-group" data-v-20c6cc96><label class="form-control skeleton-text skeleton-animate" data-v-20c6cc96></label><input type="text" class="form-control skeleton skeleton-animate" data-v-20c6cc96></div><div class="form-group" data-v-20c6cc96><label class="form-control skeleton-text skeleton-animate" data-v-20c6cc96></label><input type="text" class="form-control skeleton skeleton-animate" data-v-20c6cc96></div><div class="form-group" data-v-20c6cc96><label class="form-control skeleton-text skeleton-animate" data-v-20c6cc96></label><input type="text" class="form-control skeleton skeleton-animate" data-v-20c6cc96></div>',3),c=[d],u={key:1,class:"col-md-12"},m={class:"form-group d-inline-flex align-items-center col-5 mb-2"},p=r((()=>(0,o._)("label",{for:"group_number"},"Номер группы",-1))),g={class:"form-group d-inline-flex align-items-center col-5 mb-2"},f=r((()=>(0,o._)("label",{for:"group_dir_id"},"Направление",-1))),_=["value"],v={class:"form-group d-inline-flex align-items-center col-10 mb-2"},b=r((()=>(0,o._)("label",{for:"group_prof_id"},"Профиль",-1))),h=["value"],y={class:"form-group mt-3"},k=["disabled"],w={class:"spinner-border spinner-border-sm"};function V(e,a,t,r,d,V){const D=(0,o.up)("Field"),x=(0,o.up)("ErrorMessage"),W=(0,o.up)("Select2"),A=(0,o.up)("router-link"),C=(0,o.up)("Form");return(0,o.wg)(),(0,o.iD)("div",i,[d.dataLoading?((0,o.wg)(),(0,o.iD)("div",n,c)):((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(C,{onSubmit:V.addGroup,"validation-schema":d.schema},{default:(0,o.w5)((({errors:t})=>[(0,o._)("div",null,[(0,o._)("div",m,[p,(0,o.Wm)(D,{name:"group_number",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":t.group_number}])},null,8,["class"]),(0,o.Wm)(x,{name:"group_number",class:"error-feedback"})]),(0,o._)("div",g,[f,(0,o.Wm)(W,{class:(0,l.C_)(["col-5",{"form-control is-invalid":t.group_dir_id}]),modelValue:d.myValue,"onUpdate:modelValue":a[0]||(a[0]=e=>d.myValue=e),options:d.directions,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,o.Wm)(D,{name:"group_dir_id",as:"select",modelValue:d.myValue,"onUpdate:modelValue":a[1]||(a[1]=e=>d.myValue=e),hidden:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.directions,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.text),9,_)))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(x,{name:"group_dir_id",class:"error-feedback"})]),(0,o._)("div",v,[b,(0,o.Wm)(W,{class:(0,l.C_)(["col-5",{"form-control is-invalid":t.group_prof_id}]),modelValue:e.myValue2,"onUpdate:modelValue":a[2]||(a[2]=a=>e.myValue2=a),options:d.profiles,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,o.Wm)(D,{name:"group_prof_id",as:"select",modelValue:e.myValue2,"onUpdate:modelValue":a[3]||(a[3]=a=>e.myValue2=a),hidden:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.profiles,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.text),9,h)))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(x,{name:"group_prof_id",class:"error-feedback"})]),(0,o._)("div",y,[(0,o.Wm)(A,{to:"/groups",class:"btn btn-secondary ml-2 float-start"},{default:(0,o.w5)((()=>[(0,o.Uk)("Отмена")])),_:1}),(0,o._)("button",{class:"btn btn-primary btn-block float-end",disabled:d.loading},[(0,o.wy)((0,o._)("span",w,null,512),[[s.F8,d.loading]]),(0,o.Uk)(" Добавить профиль ")],8,k)])])])),_:1},8,["onSubmit","validation-schema"]),d.message?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,l.C_)(["alert",d.successful?"alert-success":"alert-danger"])},(0,l.zw)(d.message),3)):(0,o.kq)("",!0)]))])}var D=t(5708),x=t(7629),W=t(5124),A=t(4677),C={setup(){const e=(0,A.pm)();return{toast:e}},name:"AddGroup",components:{Form:D.l0,Field:D.gN,ErrorMessage:D.Bc},data(){const e=x.Ry().shape({});return{successful:!1,loading:!1,dataLoading:!0,message:"",schema:e,groups:null,profiles:null,directions:null,myValue:""}},computed:{},mounted(){},methods:{async addGroup(e){try{this.loading=!0;const a=await W.Z.addGroup(e.group_dir_id,e.group_prof_id,e.group_number);a.data,this.loading=!1,this.successful=!0,this.toast.success("Успешно добавили группу!")}catch(a){this.message="Ошибка",this.toast.error("Ошибка добавления группу"),console.error("Error:",a)}},async loadDirectionsData(){try{const e=await W.Z.getDirectionsAsIdText();this.directions=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Error:",e)}},async loadProfilesData(){try{const e=await W.Z.getProfilesAsIdText();this.profiles=Array.isArray(e.data)?e.data:[e.data],this.dataLoading=!1}catch(e){console.error("Error:",e)}}},created(){this.loadDirectionsData(),this.loadProfilesData()}},E=t(89);const U=(0,E.Z)(C,[["render",V],["__scopeId","data-v-20c6cc96"]]);var F=U}}]);
//# sourceMappingURL=868.c61aa9e4.js.map