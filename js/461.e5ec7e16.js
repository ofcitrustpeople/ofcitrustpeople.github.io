"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[461],{7461:function(t,e,a){a.r(e),a.d(e,{default:function(){return j}});var s=a(3396),n=a(9242),l=a(7139);const i=t=>((0,s.dD)("data-v-18e90427"),t=t(),(0,s.Cn)(),t),r={class:"col col-xs-9 col-lg-12 mt-4 list"},u={class:"col col-12"},c={class:"mb-3 col col-12"},o=i((()=>(0,s._)("i",{class:"material-icons-outlined"},"add",-1))),d={class:"col col-3 float-end"},h={key:0,class:"table"},g=i((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),_=i((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),p=i((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),m=i((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),y=i((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),P=i((()=>(0,s._)("td",null,[(0,s._)("div",{class:"skeleton skeleton-animate"})],-1))),b=[g,_,p,m,y,P],k={key:1,class:"table"},v=i((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Аудитория"),(0,s._)("th",null,"Тип"),(0,s._)("th",null,"Вместимость"),(0,s._)("th",null,"Дисциплина"),(0,s._)("th",null,"День недели"),(0,s._)("th",null,"Преподаватель")])],-1))),w=["onClick"],f=i((()=>(0,s._)("i",{class:"material-icons-outlined"},"visibility",-1))),C={class:"float-start"},D={class:"pagination"},Q=i((()=>(0,s._)("i",{class:"material-icons-outlined"},"chevron_left",-1))),S=[Q],A=["onClick"],$=i((()=>(0,s._)("i",{class:"material-icons-outlined"},"chevron_right",-1))),x=[$],z={class:"float-end"};function q(t,e,a,i,g,_){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",u,[(0,s._)("div",c,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>_.navigate&&_.navigate(...t)),class:"btn btn-primary float-start",type:"button"},[o,(0,s.Uk)("Добавить аудиторию")]),(0,s._)("div",d,[(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>g.searchQuery=t),onInput:e[2]||(e[2]=(...t)=>_.updateSearchQuery&&_.updateSearchQuery(...t)),placeholder:"Поиск..."},null,544),[[n.nr,g.searchQuery]])])]),g.loading?((0,s.wg)(),(0,s.iD)("table",h,[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.studentsPerPage,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t},b)))),128))])])):((0,s.wg)(),(0,s.iD)("table",k,[v,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.paginatedStudents,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.schedule_id},[(0,s._)("td",null,(0,l.zw)(t.number),1),(0,s._)("td",null,(0,l.zw)(t.type),1),(0,s._)("td",null,(0,l.zw)(t.count),1),(0,s._)("td",null,(0,l.zw)(t.subject_name),1),(0,s._)("td",null,(0,l.zw)(t.dayofweek),1),(0,s._)("td",null,(0,l.zw)(t.full_name),1),(0,s._)("td",null,[(0,s._)("button",{onClick:e=>_.viewStudentDetail(t.schedule_id),class:"btn btn-primary btn-sm"},[f,(0,s.Uk)("Детали")],8,w)])])))),128))])])),(0,s._)("nav",C,[(0,s._)("ul",D,[(0,s._)("li",{class:(0,l.C_)(["page-item",{disabled:1===g.currentPage}])},[(0,s._)("button",{onClick:e[3]||(e[3]=(...t)=>_.prevPage&&_.prevPage(...t)),class:"btn page-link btn-sm"},S)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.pageRange,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,l.C_)(["page-item",{active:t==g.currentPage}]),key:t},[(0,s._)("button",{onClick:e=>_.changePage(t),class:"btn page-link nmbr btn-sm"},(0,l.zw)(t),9,A)],2)))),128)),(0,s._)("li",{class:(0,l.C_)(["page-item",{disabled:g.currentPage===_.totalPages}])},[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>_.nextPage&&_.nextPage(...t)),class:"btn page-link btn-sm"},x)],2)])]),(0,s._)("div",z,[(0,s._)("button",{onClick:e[5]||(e[5]=t=>_.viewRightsDetail()),class:"btn btn-primary btn-sm"},"Права ролей")])])])}a(7658);var R=a(5124),I={data(){return{schedule:[],currentPage:1,studentsPerPage:10,maxPageButtons:3,loading:!0,searchQuery:""}},computed:{totalPages(){const t=this.filterStudents();return Math.ceil(t.length/this.studentsPerPage)},paginatedStudents(){const t=(this.currentPage-1)*this.studentsPerPage,e=t+this.studentsPerPage,a=this.filterStudents();return a.slice(t,e)},pageRange(){const t=this.totalPages,e=this.currentPage,a=this.maxPageButtons,s="...";if(t<=a)return Array.from({length:t},((t,e)=>e+1));const n=Math.floor(a/2);let l=Math.max(1,e-n),i=Math.min(t,l+a-1);i-l+1<a&&(l=i-a+1);const r=[];l>1&&r.push(1,s);for(let u=l;u<=i;u++)r.push(u);return i<t&&r.push(s,t),r}},methods:{filterStudents(){const t=this.searchQuery.toLowerCase();return this.schedule.filter((e=>String(e.number).toLowerCase().includes(t)||String(e.type).toLowerCase().includes(t)||String(e.count).includes(t)))},async loadAuditoriumData(){try{const t=await R.Z.getAllAudit();this.schedule=Array.isArray(t.data)?t.data:[t.data],this.loading=!1}catch(t){console.error("Error:",t)}},updateSearchQuery(){const t={page:1};""!==this.searchQuery.trim()&&(t.search=this.searchQuery),this.currentPage=1,this.$router.replace({query:t})},changePage(t){const e={...this.$route.query,page:t};""!==this.searchQuery.trim()&&(e.search=this.searchQuery),this.$router.replace({query:e})},prevPage(){this.currentPage>1&&this.changePage(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.changePage(this.currentPage+1)},viewStudentDetail(t){this.$router.push(`/audits/${t}`)},viewRightsDetail(){this.$router.push("/Rights/audits")},navigate(){this.$router.push("/addAudit")}},beforeRouteUpdate(t,e,a){this.searchQuery=t.query.search||"",this.currentPage=parseInt(t.query.page)||1,a()},created(){const t=this.$route.query;this.currentPage=parseInt(t.page)||1,this.searchQuery=t.search||"",this.loadAuditoriumData()}},M=a(89);const U=(0,M.Z)(I,[["render",q],["__scopeId","data-v-18e90427"]]);var j=U}}]);
//# sourceMappingURL=461.e5ec7e16.js.map