"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[468],{4468:function(a,e,t){t.r(e),t.d(e,{default:function(){return z}});var l=t(3396),s=t(7139),o=t(9242);const d=a=>((0,l.dD)("data-v-df25daea"),a=a(),(0,l.Cn)(),a),r={class:"list"},n={key:0},i=(0,l.uE)('<div class="form-group" data-v-df25daea><label class="form-control skeleton-text skeleton-animate" data-v-df25daea></label><input type="text" class="form-control skeleton skeleton-animate" data-v-df25daea></div><div class="form-group" data-v-df25daea><label class="form-control skeleton-text skeleton-animate" data-v-df25daea></label><input type="text" class="form-control skeleton skeleton-animate" data-v-df25daea></div><div class="form-group" data-v-df25daea><label class="form-control skeleton-text skeleton-animate" data-v-df25daea></label><input type="text" class="form-control skeleton skeleton-animate" data-v-df25daea></div><div class="form-group" data-v-df25daea><label class="form-control skeleton-text skeleton-animate" data-v-df25daea></label><input type="text" class="form-control skeleton skeleton-animate" data-v-df25daea></div><div class="form-group" data-v-df25daea><label class="form-control skeleton-text skeleton-animate" data-v-df25daea></label><input type="text" class="form-control skeleton skeleton-animate" data-v-df25daea></div><div class="form-group" data-v-df25daea><label class="form-control skeleton-text skeleton-animate" data-v-df25daea></label><input type="text" class="form-control skeleton skeleton-animate" data-v-df25daea></div><div class="form-group" data-v-df25daea><label class="form-control skeleton-text skeleton-animate" data-v-df25daea></label><input type="text" class="form-control skeleton skeleton-animate" data-v-df25daea></div><div class="form-group" data-v-df25daea><label class="form-control skeleton-text skeleton-animate" data-v-df25daea></label><input type="text" class="form-control skeleton skeleton-animate" data-v-df25daea></div><div class="form-group" data-v-df25daea><label class="form-control skeleton-text skeleton-animate" data-v-df25daea></label><input type="text" class="form-control skeleton skeleton-animate" data-v-df25daea></div>',9),c=[i],m={key:1,class:"col-md-12"},u={class:"form-group"},f=d((()=>(0,l._)("label",{for:"listener_id"},"Слушатель",-1))),p=["value"],v={class:"form-group"},g=d((()=>(0,l._)("label",{for:"payer_id"},"Законный представитель",-1))),y=["value"],k={class:"form-group"},_=d((()=>(0,l._)("label",{for:"contr_number"},"Номер договора",-1))),b={class:"form-group"},h=d((()=>(0,l._)("label",{for:"program_id"},"Программы",-1))),w=["value"],V={class:"form-group mt-3"},x=["disabled"],D={class:"spinner-border spinner-border-sm"};function W(a,e,t,d,i,W){const C=(0,l.up)("Select2"),A=(0,l.up)("Field"),U=(0,l.up)("ErrorMessage"),L=(0,l.up)("router-link"),P=(0,l.up)("Form");return(0,l.wg)(),(0,l.iD)("div",r,[i.dataLoading?((0,l.wg)(),(0,l.iD)("div",n,c)):((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(P,{onSubmit:W.addContract,"validation-schema":i.schema},{default:(0,l.w5)((({errors:t})=>[(0,l._)("div",null,[(0,l._)("div",u,[f,(0,l.Wm)(C,{class:(0,s.C_)({"form-control is-invalid":t.listener_id}),modelValue:a.myValue,"onUpdate:modelValue":e[0]||(e[0]=e=>a.myValue=e),options:i.listeners,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.Wm)(A,{name:"listener_id",as:"select",modelValue:a.myValue,"onUpdate:modelValue":e[1]||(e[1]=e=>a.myValue=e),hidden:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.listeners,(a=>((0,l.wg)(),(0,l.iD)("option",{key:a.id,value:a.id},(0,s.zw)(a.text),9,p)))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(U,{name:"listener_id",class:"error-feedback"})]),(0,l._)("div",v,[g,(0,l.Wm)(C,{class:(0,s.C_)({"form-control is-invalid":t.payer_id}),modelValue:a.myValue2,"onUpdate:modelValue":e[2]||(e[2]=e=>a.myValue2=e),options:i.payers,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.Wm)(A,{name:"payer_id",as:"select",modelValue:a.myValue2,"onUpdate:modelValue":e[3]||(e[3]=e=>a.myValue2=e),hidden:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.payers,(a=>((0,l.wg)(),(0,l.iD)("option",{key:a.id,value:a.id},(0,s.zw)(a.text),9,y)))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(U,{name:"payer_id",class:"error-feedback"})]),(0,l._)("div",k,[_,(0,l.Wm)(A,{name:"contr_number",type:"text",value:"",class:(0,s.C_)(["form-control",{"is-invalid":t.contr_number}])},null,8,["class"]),(0,l.Wm)(U,{name:"contr_number",class:"error-feedback"})]),(0,l._)("div",b,[h,(0,l.Wm)(C,{class:(0,s.C_)({"form-control is-invalid":t.program_id}),modelValue:a.myValue3,"onUpdate:modelValue":e[4]||(e[4]=e=>a.myValue3=e),options:i.programs,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,l.Wm)(A,{name:"program_id",as:"select",modelValue:a.myValue3,"onUpdate:modelValue":e[5]||(e[5]=e=>a.myValue3=e),hidden:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.programs,(a=>((0,l.wg)(),(0,l.iD)("option",{key:a.id,value:a.id},(0,s.zw)(a.text),9,w)))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(U,{name:"program_id",class:"error-feedback"})])]),(0,l._)("div",V,[(0,l._)("button",{class:"btn btn-primary btn-block",disabled:i.loading},[(0,l.wy)((0,l._)("span",D,null,512),[[o.F8,i.loading]]),(0,l.Uk)(" Добавить договор ")],8,x),(0,l.Wm)(L,{to:"/contracts",class:"btn btn-secondary ml-2 float-end"},{default:(0,l.w5)((()=>[(0,l.Uk)("Отмена")])),_:1})])])),_:1},8,["onSubmit","validation-schema"]),i.message?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,s.C_)(["alert",i.successful?"alert-success":"alert-danger"])},(0,s.zw)(i.message),3)):(0,l.kq)("",!0)]))])}var C=t(5708),A=t(7629),U=t(5124),L=t(4677),P={setup(){const a=(0,L.pm)();return{toast:a}},name:"AddContract",components:{Form:C.l0,Field:C.gN,ErrorMessage:C.Bc},data(){const a=A.Ry().shape({});return{successful:!1,loading:!1,dataLoading:!0,message:"",schema:a,listeners:null,payers:null,programs:null}},computed:{},mounted(){},methods:{async addContract(a){try{this.loading=!0;const e=await U.Z.addContract(a.listener_id,a.payer_id,a.contr_number,a.program_id);e.data,this.loading=!1,this.successful=!0,this.toast.success("Успешно добавили договор!")}catch(e){this.message="Ошибка",this.toast.error("Ошибка добавления договор"),console.error("Error updating contract details:",e)}},async loadListenersData(){try{const a=await U.Z.getListenersAsIdText();this.listeners=Array.isArray(a.data)?a.data:[a.data]}catch(a){console.error("Ошибка загрузки данных:",a)}},async loadPayersData(){try{const a=await U.Z.getPayersAsIdText();this.payers=Array.isArray(a.data)?a.data:[a.data]}catch(a){console.error("Ошибка загрузки данных:",a)}},async loadProgramsData(){try{const a=await U.Z.getProgramsAsIdText();this.programs=Array.isArray(a.data)?a.data:[a.data],this.dataLoading=!1}catch(a){console.error("Ошибка загрузки данных:",a)}}},created(){this.loadListenersData(),this.loadPayersData(),this.loadProgramsData()}},F=t(89);const Z=(0,F.Z)(P,[["render",W],["__scopeId","data-v-df25daea"]]);var z=Z}}]);
//# sourceMappingURL=468.d04f7d5c.js.map