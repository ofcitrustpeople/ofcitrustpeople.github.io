"use strict";(self["webpackChunkvue_3_authentication_jwt"]=self["webpackChunkvue_3_authentication_jwt"]||[]).push([[6546],{6546:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});var o=a(3396),l=a(7139),s=a(9242);const r=e=>((0,o.dD)("data-v-a06c3ce4"),e=e(),(0,o.Cn)(),e),n={class:"col-md-12 list"},c={key:0},d={class:"form-group"},i=r((()=>(0,o._)("label",{for:"listener_id"},"Слушатель",-1))),m=["value"],u={class:"form-group"},p=r((()=>(0,o._)("label",{for:"payer_id"},"Законный представитель",-1))),v=["value"],_={class:"form-group d-inline-flex align-items-center float-none mb-2 col-5"},k=r((()=>(0,o._)("label",{for:"contr_number"},"Номер договра",-1))),f={class:"form-group d-inline-flex align-items-center float-none mb-2 col-5"},y=r((()=>(0,o._)("label",{for:"program_id"},"Программа",-1))),g=["value"],b={class:"form-group d-inline-flex align-items-center col-5 mb-2"},h={class:"form-group d-inline-flex align-items-center float-none mb-2 col-5"},w=["disabled"],C={class:"spinner-border spinner-border-sm"},x={key:1},V=(0,o.uE)('<div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div><div class="form-group" data-v-a06c3ce4><label class="form-control skeleton-text skeleton-animate" data-v-a06c3ce4></label><input type="text" class="form-control skeleton skeleton-animate" data-v-a06c3ce4></div>',11),D=[V];function W(e,t,a,r,V,W){const U=(0,o.up)("Select2"),A=(0,o.up)("Field"),I=(0,o.up)("ErrorMessage"),Z=(0,o.up)("router-link"),P=(0,o.up)("Form");return(0,o.wg)(),(0,o.iD)("div",n,[V.contract?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(P,{onSubmit:W.updateContract,"validation-schema":V.schema},{default:(0,o.w5)((({errors:e})=>[(0,o._)("div",null,[(0,o._)("div",d,[i,(0,o.Wm)(U,{class:(0,l.C_)({"form-control is-invalid":e.listener_id}),modelValue:V.editedContract.listener_id,"onUpdate:modelValue":t[0]||(t[0]=e=>V.editedContract.listener_id=e),options:V.listeners,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,o.Wm)(A,{name:"listener_id",as:"select",modelValue:V.editedContract.listener_id,"onUpdate:modelValue":t[1]||(t[1]=e=>V.editedContract.listener_id=e),hidden:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.listeners,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.text),9,m)))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(I,{name:"listener_id",class:"error-feedback"})]),(0,o._)("div",u,[p,(0,o.Wm)(U,{class:(0,l.C_)({"form-control is-invalid":e.payer_id}),modelValue:V.editedContract.payer_id,"onUpdate:modelValue":t[2]||(t[2]=e=>V.editedContract.payer_id=e),options:V.payers,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,o.Wm)(A,{name:"payer_id",as:"select",modelValue:V.editedContract.payer_id,"onUpdate:modelValue":t[3]||(t[3]=e=>V.editedContract.payer_id=e),hidden:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.payers,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.text),9,v)))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(I,{name:"payer_id",class:"error-feedback"})]),(0,o._)("div",_,[k,(0,o.Wm)(A,{name:"contr_number",type:"text",value:"",class:(0,l.C_)(["form-control",{"is-invalid":e.contr_number}]),modelValue:V.editedContract.contr_number,"onUpdate:modelValue":t[4]||(t[4]=e=>V.editedContract.contr_number=e)},null,8,["class","modelValue"]),(0,o.Wm)(I,{name:"contr_number",class:"error-feedback"})]),(0,o._)("div",f,[y,(0,o.Wm)(U,{class:(0,l.C_)({"form-control is-invalid":e.program_id}),modelValue:V.editedContract.program_id,"onUpdate:modelValue":t[5]||(t[5]=e=>V.editedContract.program_id=e),options:V.programs,settings:{theme:"bootstrap-5",width:"100%"}},null,8,["class","modelValue","options"]),(0,o.Wm)(A,{name:"program_id",as:"select",modelValue:V.editedContract.program_id,"onUpdate:modelValue":t[6]||(t[6]=e=>V.editedContract.program_id=e),hidden:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.programs,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.text),9,g)))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(I,{name:"program_id",class:"error-feedback"}),(0,o._)("div",b,[(0,o.Wm)(A,{name:"course_work_vipysk",type:"radio",value:!0},{default:(0,o.w5)((({field2:e})=>[(0,o._)("label",null,[(0,o._)("input",(0,o.dG)({type:"radio",name:"course_work_vipysk"},e,{value:"false",class:"form-check-input mt-0 ml-5"}),null,16),(0,o.Uk)(" Закончил курс ")])])),_:1}),(0,o.Wm)(I,{name:"course_work_vipysk",class:"error-feedback"}),(0,o.Wm)(A,{name:"editedCw.course_work_vipysk",type:"radio",value:!0},{default:(0,o.w5)((({field:e})=>[(0,o._)("label",null,[(0,o._)("input",(0,o.dG)({type:"radio",name:"editedCw.course_work_vipysk"},e,{value:"true",class:"form-check-input mt-0 ml-5"}),null,16),(0,o.Uk)(" Закончил курс с документом ")])])),_:1}),(0,o.Wm)(A,{name:"editedCw.course_work_vipysk",type:"radio",value:!0},{default:(0,o.w5)((({field:e})=>[(0,o._)("label",null,[(0,o._)("input",(0,o.dG)({type:"radio",name:"editedCw.course_work_vipysk"},e,{value:"true",class:"form-check-input mt-0 ml-5"}),null,16),(0,o.Uk)(" Не закончил ")])])),_:1})])]),(0,o._)("div",h,[(0,o._)("button",{class:"btn btn-primary btn-block float-start",disabled:V.loading},[(0,o.wy)((0,o._)("span",C,null,512),[[s.F8,V.loading]]),(0,o.Uk)(" Обновить договор ")],8,w),(0,o._)("button",{type:"button",class:"btn btn-danger mx-2 float-end",onClick:t[7]||(t[7]=(...e)=>W.deleteContract&&W.deleteContract(...e))}," Удалить договор "),(0,o.Wm)(Z,{to:"/contracts",class:"btn btn-secondary ml-2 float-end"},{default:(0,o.w5)((()=>[(0,o.Uk)("Отмена")])),_:1})])])])),_:1},8,["onSubmit","validation-schema"])])):((0,o.wg)(),(0,o.iD)("div",x,D)),e.message?((0,o.wg)(),(0,o.iD)("div",{key:2,class:(0,l.C_)(["alert",e.successful?"alert-success":"alert-danger"])},(0,l.zw)(e.message),3)):(0,o.kq)("",!0)])}a(7658);var U=a(5708),A=a(7629),I=a(5124),Z=a(4677),P={setup(){const e=(0,Z.pm)();return{toast:e}},components:{Form:U.l0,Field:U.gN,ErrorMessage:U.Bc},data(){const e=A.Ry().shape({});return{schema:e,loading:!1,contract:null,editedContract:null,listeners:null,payers:null,programs:null}},methods:{async deleteContract(){try{this.loading=!0;const e=await I.Z.deleteContractById(this.contract.id);e.data,this.loading=!1,this.toast.success("Успешно удалили!"),this.$router.push("/contracts")}catch(e){console.error("Ошибка загрузки данных",e)}},async loadContractDetail(){const e=this.$route.params.contractId;try{const t=await I.Z.getContractById(e);this.contract=t.data,this.editedContract={...t.data}}catch(t){console.error("Error loading contract details:",t)}},async updateContract(){try{this.loading=!0;const e=await I.Z.updateContractById(this.contract.id,this.editedContract.listener_id,this.editedContract.payer_id,this.editedContract.contr_number,this.editedContract.program_id);e.data,this.contract={...this.editedContract},this.loading=!1,this.toast.success("Успешно обновили!")}catch(e){console.error("Ошибка загрузки данных:",e)}},async loadListenersData(){try{const e=await I.Z.getListenersAsIdText();this.listeners=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных:",e)}},async loadPayersData(){try{const e=await I.Z.getPayersAsIdText();this.payers=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных:",e)}},async loadProgramsData(){try{const e=await I.Z.getProgramsAsIdText();this.programs=Array.isArray(e.data)?e.data:[e.data]}catch(e){console.error("Ошибка загрузки данных:",e)}}},created(){this.loadContractDetail(),this.loadListenersData(),this.loadPayersData(),this.loadProgramsData()}},F=a(89);const z=(0,F.Z)(P,[["render",W],["__scopeId","data-v-a06c3ce4"]]);var B=z}}]);
//# sourceMappingURL=6546.b43a62b6.js.map